<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FLAIM: Database Maintenance Functions</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>Database Maintenance Functions<br>
<small>
[<a class="el" href="group__database.html">Database Functions</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dbmaint.html#g40fad5eb87a26012f67d42ffb160ce08">FlmDbCheck</a> (<a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a> hDb, const char *pszDbFileName, const char *pszDataDir, const char *pszRflDir, FLMUINT uiCheckFlags, F_Pool *pPool, <a class="el" href="struct_d_b___c_h_e_c_k___p_r_o_g_r_e_s_s.html">DB_CHECK_PROGRESS</a> *pDbStats, <a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a> fnStatusHook, void *pvAppArg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check a database for corruptions.  <a href="#g40fad5eb87a26012f67d42ffb160ce08"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dbmaint.html#g8a2ec0cf312bc560b18afbaa1dc4542b">FlmDbRebuild</a> (const char *pszSourceDbPath, const char *pszSourceDataDir, const char *pszDestDbPath, const char *pszDestDataDir, const char *pszDestRflDir, const char *pszDictPath, <a class="el" href="struct_c_r_e_a_t_e___o_p_t_s.html">CREATE_OPTS</a> *pCreateOpts, FLMUINT *puiTotalRecords, FLMUINT *puiRecsRecovered, <a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a> fnStatusHook, void *pvAppData)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rebuild a database.  <a href="#g8a2ec0cf312bc560b18afbaa1dc4542b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dbmaint.html#g124208bf480c527e771536b978dd3144">FlmDbReduceSize</a> (<a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a> hDb, FLMUINT uiCount, FLMUINT *puiCount)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reduce the database size - returning unused blocks back to the file system.  <a href="#g124208bf480c527e771536b978dd3144"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dbmaint.html#g9060d7832adc74e08a157c23dcef0104">FlmDbSweep</a> (<a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a> hDb, FLMUINT uiSweepMode, FLMUINT uiCallbackFlags, <a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a> fnStatusHook, void *pvAppData)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Traverse records in the database looking for unused fields.  <a href="#g9060d7832adc74e08a157c23dcef0104"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dbmaint.html#g6bb956f20d5edbb5186c194a98ecf356">FlmDbUpgrade</a> (<a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a> hDb, FLMUINT uiNewVersion, <a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a> fnStatusCallback, void *pvAppData)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Upgrade a database.  <a href="#g6bb956f20d5edbb5186c194a98ecf356"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dbmaint.html#gf5e3baed6eabafcefcbb33fae3db6125">FlmMaintenanceStatus</a> (<a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a> hDb, <a class="el" href="struct_f_m_a_i_n_t___s_t_a_t_u_s.html">FMAINT_STATUS</a> *pMaintStatus)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current status of the background maintenance thread for a database.  <a href="#gf5e3baed6eabafcefcbb33fae3db6125"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g40fad5eb87a26012f67d42ffb160ce08"></a><!-- doxytag: member="flaim.h::FlmDbCheck" ref="g40fad5eb87a26012f67d42ffb160ce08" args="(HFDB hDb, const char *pszDbFileName, const char *pszDataDir, const char *pszRflDir, FLMUINT uiCheckFlags, F_Pool *pPool, DB_CHECK_PROGRESS *pDbStats, STATUS_HOOK fnStatusHook, void *pvAppArg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI FlmDbCheck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hDb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszDbFileName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszDataDir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszRflDir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiCheckFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>F_Pool *&nbsp;</td>
          <td class="mdname" nowrap> <em>pPool</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_d_b___c_h_e_c_k___p_r_o_g_r_e_s_s.html">DB_CHECK_PROGRESS</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pDbStats</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fnStatusHook</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>pvAppArg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check a database for corruptions. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>hDb</em>&nbsp;</td><td>
Database handle of database to be checked. If HFDB_NULL, FlmDbCheck will call <a class="el" href="group__dbcreateopen.html#g6a96bee435ae7ba8e7208d76df1402a1">FlmDbOpen()</a> using the pszDbFileName, pszDataDir, pszRflDir, and uiFlags parameters. </td></tr>
<tr><td valign="top"><em>pszDbFileName</em>&nbsp;</td><td>
Name of database to be checked. This is only used if hDb is HFDB_NULL. </td></tr>
<tr><td valign="top"><em>pszDataDir</em>&nbsp;</td><td>
Directory where database's data files are located. This is only used if hDb is HFDB_NULL. If this parameter is NULL, data files are assumed to be in the same directory as pszDbFileName. </td></tr>
<tr><td valign="top"><em>pszRflDir</em>&nbsp;</td><td>
Directory where database's RFL files are located. This is only used if hDb is HFDB_NULL. If this parameter is NULL, RFL files are assumed to be in the same directory as pszDbFileName. </td></tr>
<tr><td valign="top"><em>uiCheckFlags</em>&nbsp;</td><td>
Checking options. May include one or more of the following flags ORed together:<br>
<ul>
<li>FLM_CHK_INDEX_REFERENCING - Check logical integrity of indexes to make sure all keys in the index are in the referenced records and that all keys generated from records are in the index</li><li>FLM_CHK_FIELDS - Check fields in records </li></ul>
</td></tr>
<tr><td valign="top"><em>pPool</em>&nbsp;</td><td>
Memory pool for allocating memory to hold various statistics in the pDbStats parameter. </td></tr>
<tr><td valign="top"><em>pDbStats</em>&nbsp;</td><td>
Statistics collected about the database during the check. </td></tr>
<tr><td valign="top"><em>fnStatusHook</em>&nbsp;</td><td>
Callback status function. </td></tr>
<tr><td valign="top"><em>pvAppArg</em>&nbsp;</td><td>
Pointer to application data. This pointer is passed into fnStatusHook whenever it is called. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="g8a2ec0cf312bc560b18afbaa1dc4542b"></a><!-- doxytag: member="flaim.h::FlmDbRebuild" ref="g8a2ec0cf312bc560b18afbaa1dc4542b" args="(const char *pszSourceDbPath, const char *pszSourceDataDir, const char *pszDestDbPath, const char *pszDestDataDir, const char *pszDestRflDir, const char *pszDictPath, CREATE_OPTS *pCreateOpts, FLMUINT *puiTotalRecords, FLMUINT *puiRecsRecovered, STATUS_HOOK fnStatusHook, void *pvAppData)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI FlmDbRebuild           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszSourceDbPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszSourceDataDir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszDestDbPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszDestDataDir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszDestRflDir</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pszDictPath</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_c_r_e_a_t_e___o_p_t_s.html">CREATE_OPTS</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pCreateOpts</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>puiTotalRecords</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>puiRecsRecovered</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fnStatusHook</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>pvAppData</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Rebuild a database. 
<p>
This function creates a new database from an existing database by extracting records from the existing database and inserting them into the new database. Any corrupted parts of the existing database are ignored. In this way, if a database is corrupt, a new database may be built from it that has no corruptions. In addition, indexes in the new database will be rebuilt. <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>pszSourceDbPath</em>&nbsp;</td><td>
Name of database to be rebuilt. </td></tr>
<tr><td valign="top"><em>pszSourceDataDir</em>&nbsp;</td><td>
Directory where database's data files are located. If NULL, it is assumed that the database's data files are located in the same directory as pszSourceDbPath. </td></tr>
<tr><td valign="top"><em>pszDestDbPath</em>&nbsp;</td><td>
Name of new database that is to be created. </td></tr>
<tr><td valign="top"><em>pszDestDataDir</em>&nbsp;</td><td>
Directory where new database's data files are to be created. If NULL, data files will be created in the same directory as pszDestDbPath. </td></tr>
<tr><td valign="top"><em>pszDestRflDir</em>&nbsp;</td><td>
Directory where new database's RFL files are to be created. If NULL, RFL files will be created in the same directory as pszDestDbPath. </td></tr>
<tr><td valign="top"><em>pszDictPath</em>&nbsp;</td><td>
If non-NULL, this is the name of a file that has dictionary definitions which are to be loaded into the new database's dictionary container. </td></tr>
<tr><td valign="top"><em>pCreateOpts</em>&nbsp;</td><td>
Create options for the new database. </td></tr>
<tr><td valign="top"><em>puiTotalRecords</em>&nbsp;</td><td>
Returns the total number of records that were found in the source database. </td></tr>
<tr><td valign="top"><em>puiRecsRecovered</em>&nbsp;</td><td>
Returns the total number of records that were recovered from the source database. </td></tr>
<tr><td valign="top"><em>fnStatusHook</em>&nbsp;</td><td>
Callback function. <a class="el" href="group__dbmaint.html#g8a2ec0cf312bc560b18afbaa1dc4542b">FlmDbRebuild()</a> calls this function to report rebuild progress. </td></tr>
<tr><td valign="top"><em>pvAppData</em>&nbsp;</td><td>
Pointer to application data which will be passed into the callback function whenever it is called. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="g124208bf480c527e771536b978dd3144"></a><!-- doxytag: member="flaim.h::FlmDbReduceSize" ref="g124208bf480c527e771536b978dd3144" args="(HFDB hDb, FLMUINT uiCount, FLMUINT *puiCount)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI FlmDbReduceSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hDb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiCount</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT *&nbsp;</td>
          <td class="mdname" nowrap> <em>puiCount</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reduce the database size - returning unused blocks back to the file system. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>hDb</em>&nbsp;</td><td>
Database handle. </td></tr>
<tr><td valign="top"><em>uiCount</em>&nbsp;</td><td>
Maximum number of unused blocks to be returned to file system. </td></tr>
<tr><td valign="top"><em>puiCount</em>&nbsp;</td><td>
Number of blocks actually returned. This should be the same as the number of blocks requested, unless there are not that many unused blocks. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="g9060d7832adc74e08a157c23dcef0104"></a><!-- doxytag: member="flaim.h::FlmDbSweep" ref="g9060d7832adc74e08a157c23dcef0104" args="(HFDB hDb, FLMUINT uiSweepMode, FLMUINT uiCallbackFlags, STATUS_HOOK fnStatusHook, void *pvAppData)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI FlmDbSweep           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hDb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiSweepMode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiCallbackFlags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fnStatusHook</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>pvAppData</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Traverse records in the database looking for unused fields. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>hDb</em>&nbsp;</td><td>
Database handle. </td></tr>
<tr><td valign="top"><em>uiSweepMode</em>&nbsp;</td><td>
Flags indicating what actions <a class="el" href="group__dbmaint.html#g9060d7832adc74e08a157c23dcef0104">FlmDbSweep()</a> should do while it is traversing the database. It may be any of the following flags ORed together:<br>
<ul>
<li>SWEEP_CHECKING_FLDS - Look for field definitions marked as "checking". These fields should be checked to see if they are still in use</li><li>SWEEP_PURGED_FLDS - Look for field definitions marke as "purged". These fields should be removed from records</li><li>SWEEP_STATS - Only calls the callback function. This provides a way for an application to collect database statistics </li></ul>
</td></tr>
<tr><td valign="top"><em>uiCallbackFlags</em>&nbsp;</td><td>
Flags indicating what what events <a class="el" href="group__dbmaint.html#g9060d7832adc74e08a157c23dcef0104">FlmDbSweep()</a> should report through the callback function. It may be any of the following flags ORed together:<br>
<ul>
<li>EACH_CONTAINER - Callback function is called whenever <a class="el" href="group__dbmaint.html#g9060d7832adc74e08a157c23dcef0104">FlmDbSweep()</a> begins traversing a new container</li><li>EACH_RECORD - Callback function is called for each record traversed</li><li>EACH_FIELD - Callback function is called for each field traversed</li><li>EACH_CHANGE - Callback function is called whenever a field that was marked as "checking" is found in the database and the state is changed back to "unused". It is also calld whenever a field that was marked as "purged" is removed from a record </li></ul>
</td></tr>
<tr><td valign="top"><em>fnStatusHook</em>&nbsp;</td><td>
Callback function. See <a class="el" href="flaim_8h.html#008c52547625d43dc721c8fffa9c3ff79e6a3b8de3f0545689244fff160bc888">eStatusType::FLM_SWEEP_STATUS</a> for documentation on data that is passed to the callback function when it is called. </td></tr>
<tr><td valign="top"><em>pvAppData</em>&nbsp;</td><td>
Pointer to application data that will be passed to the callback function whenever it is called. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="g6bb956f20d5edbb5186c194a98ecf356"></a><!-- doxytag: member="flaim.h::FlmDbUpgrade" ref="g6bb956f20d5edbb5186c194a98ecf356" args="(HFDB hDb, FLMUINT uiNewVersion, STATUS_HOOK fnStatusCallback, void *pvAppData)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI FlmDbUpgrade           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hDb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>FLMUINT&nbsp;</td>
          <td class="mdname" nowrap> <em>uiNewVersion</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="flaim_8h.html#a65e9274e608cd40f2e025334f63b92c">STATUS_HOOK</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>fnStatusCallback</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>pvAppData</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Upgrade a database. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>hDb</em>&nbsp;</td><td>
Database handle. </td></tr>
<tr><td valign="top"><em>uiNewVersion</em>&nbsp;</td><td>
Version database is to be upgraded to. This must be greater than the current version of the database. </td></tr>
<tr><td valign="top"><em>fnStatusCallback</em>&nbsp;</td><td>
Callback function that is called while the database is being upgraded. See documentaiton <a class="el" href="flaim_8h.html#008c52547625d43dc721c8fffa9c3ff7c3f4b345ab377de36b80abacd02230ac">eStatusType::FLM_DB_UPGRADE_STATUS</a> for documentation on data that is passed to the callback function when it is called. </td></tr>
<tr><td valign="top"><em>pvAppData</em>&nbsp;</td><td>
Pointer to application data that will be passed to the callback function whenever it is called. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a class="anchor" name="gf5e3baed6eabafcefcbb33fae3db6125"></a><!-- doxytag: member="flaim.h::FlmMaintenanceStatus" ref="gf5e3baed6eabafcefcbb33fae3db6125" args="(HFDB hDb, FMAINT_STATUS *pMaintStatus)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">FLMEXP <a class="el" href="group__retcodes.html#gdb32c21438b2437b617d4325fc63bb1c">RCODE</a> FLMAPI FlmMaintenanceStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="flaim_8h.html#d5d10dbdafceb342f4cf24ec5dc2e6e3">HFDB</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>hDb</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="struct_f_m_a_i_n_t___s_t_a_t_u_s.html">FMAINT_STATUS</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pMaintStatus</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the current status of the background maintenance thread for a database. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>hDb</em>&nbsp;</td><td>
Database handle. </td></tr>
<tr><td valign="top"><em>pMaintStatus</em>&nbsp;</td><td>
Status is returned in this structure. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 12 16:56:30 2006 for FLAIM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
